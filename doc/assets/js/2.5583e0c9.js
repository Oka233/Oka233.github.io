(window.webpackJsonp=window.webpackJsonp||[]).push([[2,6],{767:function(t,e,i){},768:function(t,e,i){},772:function(t,e,i){"use strict";i(767)},773:function(t,e,i){"use strict";i(768)},801:function(t,e,i){"use strict";i.r(e);var s=i(769),r=i(802),o={name:"BlueprintEditor",data:()=>({graph:null,highlighter:{pending:{highlighter:{name:"stroke",args:{padding:-4,attrs:{"stroke-width":2,stroke:"#7e7e7e"}}}},running:{highlighter:{name:"stroke",args:{padding:-4,attrs:{"stroke-width":2,stroke:"#7e7eff"}}}},success:{highlighter:{name:"stroke",args:{padding:-4,attrs:{"stroke-width":2,stroke:"#7eff7e"}}}},error:{highlighter:{name:"stroke",args:{padding:-4,attrs:{"stroke-width":2,stroke:"#ff7e7e"}}}}}}),mounted(){this.preWork(),this.graph=new s.e({container:document.getElementById("graph-container"),grid:!0,mousewheel:{enabled:!0,zoomAtMousePosition:!0,modifiers:"ctrl",minScale:.5,maxScale:3},panning:{enabled:!1},connecting:{router:"manhattan",connector:{name:"rounded",args:{radius:8}},anchor:"center",connectionPoint:"anchor",allowBlank:!1,snap:{radius:20},createEdge:()=>new s.i.Edge({attrs:{line:{stroke:"#A2B1C3",strokeWidth:2,targetMarker:{name:"block",width:12,height:8}}},zIndex:0}),validateConnection:({targetMagnet:t})=>!!t},highlighting:{magnetAdsorbed:{name:"stroke",args:{attrs:{fill:"#5F95FF",stroke:"#5F95FF"}}}}});const t=this.graph,e=new r.a({title:"指标计算",target:t,stencilGraphWidth:200,collapsable:!0,groups:[{title:"流程",name:"group1",graphHeight:64},{title:"数据源",name:"group2",graphHeight:64},{title:"数据预处理",name:"group3",graphHeight:110},{title:"分析方法",name:"group4",graphHeight:64}],layoutOptions:{columns:2,columnWidth:90,rowHeight:45}});document.getElementById("stencil").appendChild(e.container);const i=(t,e)=>{for(let i=0,s=t.length;i<s;i+=1)t[i].style.visibility=e?"visible":"hidden"};t.on("node:mouseenter",()=>{const t=document.getElementById("graph-container").querySelectorAll(".x6-port-body");i(t,!0)}),t.on("node:mouseleave",()=>{const t=document.getElementById("graph-container").querySelectorAll(".x6-port-body");i(t,!1)});s.e.registerNode("custom-rect",{inherit:"rect",width:80,height:36,attrs:{body:{strokeWidth:1,stroke:"#5F95FF",fill:"#EFF4FF"},text:{fontSize:12,fill:"#262626"}},ports:{groups:{top:{position:"top",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},right:{position:"right",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},bottom:{position:"bottom",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},left:{position:"left",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}}},items:[{group:"top"},{group:"right"},{group:"bottom"},{group:"left"}]}},!0);const o=e=>t.createNode({shape:"custom-rect",label:e});e.load([o("开始"),o("结束")],"group1"),e.load([o("仿真数据"),o("参考数据")],"group2"),e.load([o("奇异值处理"),o("时间点对齐"),o("缺失值处理"),o("两总体均值")],"group3"),e.load([o("灰色关联法"),o("正态性检验")],"group4")},methods:{fromJSON(t){this.graph.fromJSON(t)},toJSON(){return this.graph.toJSON()},getGraph(){return this.graph},highlight(t,e){this.graph.findViewByCell(t).highlight(null,this.highlighter[e])},unhighlightAll(){this.graph.getNodes().forEach(t=>{for(const e in this.highlighter)this.graph.findViewByCell(t).unhighlight(null,this.highlighter[e])})},preWork(){const t=document.getElementById("container"),e=document.createElement("div");e.id="stencil";const i=document.createElement("div");i.id="graph-container",t.appendChild(e),t.appendChild(i)}}},d=(i(772),i(773),i(7)),a=Object(d.a)(o,(function(){this._self._c;return this._m(0)}),[function(){var t=this._self._c;return t("div",[t("div",{attrs:{id:"container"}},[t("div",{attrs:{id:"stencil"}}),this._v(" "),t("div",{attrs:{id:"graph-container"}})])])}],!1,null,"144f25c4",null);e.default=a.exports},863:function(t,e,i){"use strict";i.r(e);i(126);var s=i(801);i(35);class r{constructor({taskId:t,job:e,node:i,incoming:s,children:r}){this.taskId=t,this.job=e,this.node=i,this.incoming=s,this.children=r,this.state="pending",this.data=[]}addData(t){this.data.push(t)}isReady(){return"pending"===this.state&&this.data.length>=this.incoming}run(...t){this.job(this.data,...t)}}class o{constructor(t={}){const{limit:e}=t;this.limit=e||3,this.taskQueue=[],this.runningTaskCnt=0,this.events={"task-done":()=>{},"task-fail":()=>{},"task-in-queue":()=>{},"task-begin":()=>{}},this.jobs=[]}bind(t,e){this.events[t]=e}registerJob(t,e){this.jobs[t]=e}setGraph(t){this.graph=t}run(t){if(this.step=t,this.taskQueue.some(t=>"failed"===t.state)&&this.taskQueue.forEach(t=>{"failed"===t.state&&(t.state="pending")}),t&&this.taskQueue.length)this.runTask();else if(this.getRootNodes().forEach(t=>{this.addNodeTaskToQueue("root-node-data",t)}),t)this.runTask();else for(let t=0;t<this.limit;t++)this.runTask()}addNodeTaskToQueue(t,e){const i=this.taskQueue.findIndex(t=>t.taskId===this.getNodeAttr(e,"id"));if(i>-1)return this.taskQueue[i].addData(t),this.taskQueue[i];{const i=this.getNodeJob(e),s=this.getRelatedNodes(e,"to"),o=this.getRelatedNodes(e,"from"),d=new r({taskId:this.getNodeAttr(e,"id"),job:i,node:e,incoming:o?o.length:0,children:s||[]});return d.addData(t),this.taskQueue.push(d),d}}runTask(){if(this.runningTaskCnt>=this.limit)return;const t=this.taskQueue.find(t=>t.isReady());t&&(t.state="running",this.events["task-begin"](t),this.runningTaskCnt++,t.run(e=>{this.step&&(console.log("_________DEBUG_________"),console.log("incoming:",...t.data),console.log("outgoing:",e),console.log("task:",t)),this.events["task-done"](t),t.state="done",this.runningTaskCnt--;for(const i of t.children){const t=this.addNodeTaskToQueue(e,i);this.events["task-in-queue"](t),this.step||this.runTask()}},e=>{this.runningTaskCnt--,t.state="failed",this.events["task-fail"](t,e)}))}getNodeJob(t){return this.jobs[this.getNodeAttr(t,"task")]}getNodeAttr(t,e){return"id"===e?t.id:t.getData()[e]}getRelatedNodes(t,e){return this.graph.getNeighbors(t,{incoming:"from"===e,outgoing:"to"===e})}getRootNodes(){return this.graph.getRootNodes()}reset(){this.taskQueue=[],this.runningTaskCnt=0}setLimit(t){this.limit=t}}var d={cells:[{shape:"edge",attrs:{line:{stroke:"#A2B1C3",targetMarker:{name:"block",width:12,height:8}}},id:"f7b2f3b8-3cd6-43a0-8614-28c0c014f0c9",zIndex:0,source:{cell:"4a32b5fe-16dc-41e7-8f4c-965c3716e572",port:"d04c8ed5-feb6-40b3-a96a-6f1d98c68824"},target:{cell:"5a52af5c-cb6b-468b-81da-dc5f3358d31f",port:"1d56e4bd-7ac5-4627-be9a-9d1fe9cd1699"}},{shape:"edge",attrs:{line:{stroke:"#A2B1C3",targetMarker:{name:"block",width:12,height:8}}},id:"ae1b9820-6606-4449-b915-797c38174ef4",zIndex:0,source:{cell:"4a32b5fe-16dc-41e7-8f4c-965c3716e572",port:"d04c8ed5-feb6-40b3-a96a-6f1d98c68824"},target:{cell:"c80d913c-c15d-4e1f-9282-d4d914191778",port:"a8bf9814-53d8-46fa-a726-3dc444e9096c"}},{shape:"edge",attrs:{line:{stroke:"#A2B1C3",targetMarker:{name:"block",width:12,height:8}}},id:"86c21a50-8cd1-42fc-9338-e346f351483d",zIndex:0,source:{cell:"5a52af5c-cb6b-468b-81da-dc5f3358d31f",port:"8dfbfa25-dcac-431a-b2ac-880b1944ea22"},target:{cell:"8880940d-2255-44bb-90f0-771ae6011a4f",port:"735ecd48-f6bd-4797-a97d-f252b9176cc9"}},{shape:"edge",attrs:{line:{stroke:"#A2B1C3",targetMarker:{name:"block",width:12,height:8}}},id:"f11b2946-fe73-44f3-bc0c-029c63325696",zIndex:0,source:{cell:"5a52af5c-cb6b-468b-81da-dc5f3358d31f",port:"8dfbfa25-dcac-431a-b2ac-880b1944ea22"},target:{cell:"03880389-3cc7-4d2a-8687-e56845afd52c",port:"79c92324-c022-43c1-a847-94a9bf12257f"}},{shape:"edge",attrs:{line:{stroke:"#A2B1C3",targetMarker:{name:"block",width:12,height:8}}},id:"8946114c-9b91-4390-a3cf-48532bf9d6cc",zIndex:0,source:{cell:"c80d913c-c15d-4e1f-9282-d4d914191778",port:"432d7f74-ff5a-4685-9684-df88bee391de"},target:{cell:"f38fd449-9cd3-4e9f-ad60-43dc96066a5c",port:"f115ca0c-0cdf-46f7-9661-2919cab051e7"}},{shape:"edge",attrs:{line:{stroke:"#A2B1C3",targetMarker:{name:"block",width:12,height:8}}},id:"5c454d09-4bc8-4fc1-ac91-d62036857d9d",zIndex:0,source:{cell:"c80d913c-c15d-4e1f-9282-d4d914191778",port:"432d7f74-ff5a-4685-9684-df88bee391de"},target:{cell:"cc419317-0c72-470f-ae6d-4ff724009530",port:"272a5e30-abd7-4eb3-8694-fb2e02e5a6a0"}},{shape:"edge",attrs:{line:{stroke:"#A2B1C3",targetMarker:{name:"block",width:12,height:8}}},id:"df4b90d9-7d40-4e7f-a087-0847736e907d",zIndex:0,source:{cell:"8880940d-2255-44bb-90f0-771ae6011a4f",port:"ee00a933-69b4-4369-8f15-7c58326e1afc"},target:{cell:"eefaf640-1308-4748-b56f-55aebc5745d0",port:"3ef940a5-f207-40af-8456-d35116a8281c"}},{shape:"edge",attrs:{line:{stroke:"#A2B1C3",targetMarker:{name:"block",width:12,height:8}}},id:"50a7179f-8d12-410e-994c-dfae9ed1a0b7",zIndex:0,source:{cell:"03880389-3cc7-4d2a-8687-e56845afd52c",port:"7df5aca7-3f97-4638-9e70-5710dc559e93"},target:{cell:"eefaf640-1308-4748-b56f-55aebc5745d0",port:"3ef940a5-f207-40af-8456-d35116a8281c"}},{shape:"edge",attrs:{line:{stroke:"#A2B1C3",targetMarker:{name:"block",width:12,height:8}}},id:"b20b9b1a-11f7-4b04-9673-94e9f5ea2346",zIndex:0,source:{cell:"eefaf640-1308-4748-b56f-55aebc5745d0",port:"fbdd7b74-f740-48c7-a024-687fb6c7ef78"},target:{cell:"1d6b9049-62a6-4081-83ba-dbe59dc373e9",port:"26b1d7d6-290b-4694-ad3e-a846b0ad0139"}},{shape:"edge",attrs:{line:{stroke:"#A2B1C3",targetMarker:{name:"block",width:12,height:8}}},id:"4623eaa8-5c2d-4489-a922-5c1c32d5013a",zIndex:0,source:{cell:"fb79a937-5bc6-4e08-b982-9f8cf76117fa",port:"992ea4fe-097f-4e93-beb1-221c047f0241"},target:{cell:"1d6b9049-62a6-4081-83ba-dbe59dc373e9",port:"26b1d7d6-290b-4694-ad3e-a846b0ad0139"}},{shape:"edge",attrs:{line:{stroke:"#A2B1C3",targetMarker:{name:"block",width:12,height:8}}},id:"e0064f63-dbad-40a2-a7e2-61564b4273b3",zIndex:0,source:{cell:"f38fd449-9cd3-4e9f-ad60-43dc96066a5c",port:"b8b2cd67-6304-478d-855c-7a8992436c11"},target:{cell:"a5df2d1a-5330-4010-9c60-3997246cdb86",port:"735ecd48-f6bd-4797-a97d-f252b9176cc9"}},{shape:"edge",attrs:{line:{stroke:"#A2B1C3",targetMarker:{name:"block",width:12,height:8}}},id:"07b0543d-3856-4f79-8d86-0557db357293",zIndex:0,source:{cell:"a5df2d1a-5330-4010-9c60-3997246cdb86",port:"ee00a933-69b4-4369-8f15-7c58326e1afc"},target:{cell:"fb79a937-5bc6-4e08-b982-9f8cf76117fa",port:"b75df115-2d4c-4db5-a691-cda7114007b7"}},{shape:"edge",attrs:{line:{stroke:"#A2B1C3",targetMarker:{name:"block",width:12,height:8}}},id:"935007be-7947-4d05-a360-abd32dbae097",zIndex:0,source:{cell:"cc419317-0c72-470f-ae6d-4ff724009530",port:"b148cf37-b1f4-4845-b66e-45a7e1be9e56"},target:{cell:"fb79a937-5bc6-4e08-b982-9f8cf76117fa",port:"b75df115-2d4c-4db5-a691-cda7114007b7"}},{position:{x:200,y:30},size:{width:80,height:36},attrs:{text:{text:"开始"}},visible:!0,shape:"custom-rect",ports:{groups:{top:{position:"top",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},right:{position:"right",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},bottom:{position:"bottom",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},left:{position:"left",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}}},items:[{group:"top",id:"ef3c8834-716c-4aea-9a85-2204c871e09c"},{group:"right",id:"ba67ae7d-311b-4fd6-86c6-f2d50a0686ed"},{group:"bottom",id:"d04c8ed5-feb6-40b3-a96a-6f1d98c68824"},{group:"left",id:"8c6e042f-e683-4aaa-9455-ded493a1e66a"}]},id:"4a32b5fe-16dc-41e7-8f4c-965c3716e572",zIndex:1,data:{task:"demoJob"}},{position:{x:200,y:440},size:{width:80,height:36},attrs:{text:{text:"结束"}},visible:!0,shape:"custom-rect",ports:{groups:{top:{position:"top",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},right:{position:"right",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},bottom:{position:"bottom",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},left:{position:"left",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}}},items:[{group:"top",id:"26b1d7d6-290b-4694-ad3e-a846b0ad0139"},{group:"right",id:"c903e40c-cced-4898-92ad-6a0965b87763"},{group:"bottom",id:"27979dd2-b1f2-4cfe-bc25-6cff98f2a3ad"},{group:"left",id:"62bf3ddf-936b-42f8-9463-7c000ea71e72"}]},id:"1d6b9049-62a6-4081-83ba-dbe59dc373e9",zIndex:2,data:{task:"demoJob"}},{position:{x:110,y:110},size:{width:80,height:36},attrs:{text:{text:"仿真数据"}},visible:!0,shape:"custom-rect",ports:{groups:{top:{position:"top",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},right:{position:"right",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},bottom:{position:"bottom",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},left:{position:"left",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}}},items:[{group:"top",id:"1d56e4bd-7ac5-4627-be9a-9d1fe9cd1699"},{group:"right",id:"43624bf8-ddd2-404e-82fc-f97e63de3d16"},{group:"bottom",id:"8dfbfa25-dcac-431a-b2ac-880b1944ea22"},{group:"left",id:"5924ce58-2b56-4cf0-8c48-d2d0a32c15bf"}]},id:"5a52af5c-cb6b-468b-81da-dc5f3358d31f",zIndex:3,data:{task:"demoJob"}},{position:{x:290,y:110},size:{width:80,height:36},attrs:{text:{text:"参考数据"}},visible:!0,shape:"custom-rect",ports:{groups:{top:{position:"top",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},right:{position:"right",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},bottom:{position:"bottom",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},left:{position:"left",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}}},items:[{group:"top",id:"a8bf9814-53d8-46fa-a726-3dc444e9096c"},{group:"right",id:"1974a00c-4174-4ec3-bc13-9ff710d7bc25"},{group:"bottom",id:"432d7f74-ff5a-4685-9684-df88bee391de"},{group:"left",id:"2b69167c-824e-4de6-8aa6-612cfe271488"}]},id:"c80d913c-c15d-4e1f-9282-d4d914191778",zIndex:4,data:{task:"demoJob"}},{position:{x:20,y:200},size:{width:80,height:36},attrs:{text:{text:"奇异值处理"}},visible:!0,shape:"custom-rect",ports:{groups:{top:{position:"top",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},right:{position:"right",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},bottom:{position:"bottom",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},left:{position:"left",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}}},items:[{group:"top",id:"735ecd48-f6bd-4797-a97d-f252b9176cc9"},{group:"right",id:"c90be85c-6ee6-471e-a4ce-bb1040b37218"},{group:"bottom",id:"ee00a933-69b4-4369-8f15-7c58326e1afc"},{group:"left",id:"9c523c4a-90cd-4f36-80f8-e54de133bbc8"}]},id:"8880940d-2255-44bb-90f0-771ae6011a4f",zIndex:5,data:{task:"demoJob"}},{position:{x:140,y:200},size:{width:80,height:36},attrs:{text:{text:"时间点对齐"}},visible:!0,shape:"custom-rect",ports:{groups:{top:{position:"top",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},right:{position:"right",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},bottom:{position:"bottom",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},left:{position:"left",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}}},items:[{group:"top",id:"79c92324-c022-43c1-a847-94a9bf12257f"},{group:"right",id:"2d92b18b-7bcf-40d7-8001-519ba0936a88"},{group:"bottom",id:"7df5aca7-3f97-4638-9e70-5710dc559e93"},{group:"left",id:"7d273e04-de00-40be-b2ad-f4ccf85e002d"}]},id:"03880389-3cc7-4d2a-8687-e56845afd52c",zIndex:6,data:{task:"demoJob"}},{position:{x:250,y:200},size:{width:80,height:36},attrs:{text:{text:"缺失值处理"}},visible:!0,shape:"custom-rect",ports:{groups:{top:{position:"top",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},right:{position:"right",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},bottom:{position:"bottom",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},left:{position:"left",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}}},items:[{group:"top",id:"f115ca0c-0cdf-46f7-9661-2919cab051e7"},{group:"right",id:"6cd895d5-8cee-4db6-a978-ddb10ddfc16c"},{group:"bottom",id:"b8b2cd67-6304-478d-855c-7a8992436c11"},{group:"left",id:"bf3f48d8-de20-4722-9d5b-7da5131a70d6"}]},id:"f38fd449-9cd3-4e9f-ad60-43dc96066a5c",zIndex:7,data:{task:"demoJob"}},{position:{x:380,y:200},size:{width:80,height:36},attrs:{text:{text:"两总体均值"}},visible:!0,shape:"custom-rect",ports:{groups:{top:{position:"top",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},right:{position:"right",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},bottom:{position:"bottom",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},left:{position:"left",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}}},items:[{group:"top",id:"272a5e30-abd7-4eb3-8694-fb2e02e5a6a0"},{group:"right",id:"7604f3fa-6e7e-4153-b872-8ea13ec04fd7"},{group:"bottom",id:"b148cf37-b1f4-4845-b66e-45a7e1be9e56"},{group:"left",id:"dcd32bc6-9869-4a9e-acb5-b4e4eae320d5"}]},id:"cc419317-0c72-470f-ae6d-4ff724009530",zIndex:8,data:{task:"demoJob"}},{position:{x:90,y:320},size:{width:80,height:36},attrs:{text:{text:"灰色关联法"}},visible:!0,shape:"custom-rect",ports:{groups:{top:{position:"top",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},right:{position:"right",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},bottom:{position:"bottom",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},left:{position:"left",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}}},items:[{group:"top",id:"3ef940a5-f207-40af-8456-d35116a8281c"},{group:"right",id:"b40a85a8-8a61-4202-b72b-e500440d12f4"},{group:"bottom",id:"fbdd7b74-f740-48c7-a024-687fb6c7ef78"},{group:"left",id:"def28ded-a699-476f-982e-1433a14bf297"}]},id:"eefaf640-1308-4748-b56f-55aebc5745d0",zIndex:9,data:{task:"demoJob"}},{position:{x:320,y:360},size:{width:80,height:36},attrs:{text:{text:"正态性检验"}},visible:!0,shape:"custom-rect",ports:{groups:{top:{position:"top",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},right:{position:"right",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},bottom:{position:"bottom",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},left:{position:"left",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}}},items:[{group:"top",id:"b75df115-2d4c-4db5-a691-cda7114007b7"},{group:"right",id:"0f694517-1f00-4e4c-b884-8334e30b24b1"},{group:"bottom",id:"992ea4fe-097f-4e93-beb1-221c047f0241"},{group:"left",id:"a7dcca7d-a4d4-418e-a2e1-70b969ea2b6f"}]},id:"fb79a937-5bc6-4e08-b982-9f8cf76117fa",zIndex:10,data:{task:"demoJob"}},{position:{x:260,y:280},size:{width:80,height:36},attrs:{text:{text:"奇异值处理"}},visible:!0,shape:"custom-rect",ports:{groups:{top:{position:"top",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},right:{position:"right",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},bottom:{position:"bottom",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},left:{position:"left",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}}},items:[{group:"top",id:"735ecd48-f6bd-4797-a97d-f252b9176cc9"},{group:"right",id:"c90be85c-6ee6-471e-a4ce-bb1040b37218"},{group:"bottom",id:"ee00a933-69b4-4369-8f15-7c58326e1afc"},{group:"left",id:"9c523c4a-90cd-4f36-80f8-e54de133bbc8"}]},id:"a5df2d1a-5330-4010-9c60-3997246cdb86",zIndex:11,data:{task:"demoJob"}}]},a={name:"DAGTEDemo",components:{BlueprintEditor:s.default},data:()=>({executor:null,byStep:!1,limit:3,running:!1}),watch:{limit(t){this.executor.setLimit(t)}},mounted(){this.executor=new o,this.executor.registerJob("demoJob",(t,e,i)=>{setTimeout(()=>{Math.random()>.1?e(Date.now()):i(new Error("运气不好"))},Math.floor(901*Math.random()+100))}),this.executor.bind("task-done",({node:t,children:e})=>{this.$refs.blueprint.highlight(t,"success"),e.length||(this.$message.success("计算执行成功"),this.running=!1)}),this.executor.bind("task-fail",({node:t},e)=>{this.$refs.blueprint.highlight(t,"error"),this.$message.error(`${t.getAttrs().text.text}执行失败，因${e.message}，可尝试重试执行`)}),this.executor.bind("task-begin",({node:t})=>{this.$refs.blueprint.highlight(t,"running")}),this.$refs.blueprint.fromJSON(d),this.$refs.blueprint.getGraph().on("node:added",({node:t})=>{t.setData({task:"demoJob"})})},methods:{execute(){this.running||(this.executor.reset(),this.$refs.blueprint.unhighlightAll()),this.executor.setGraph(this.$refs.blueprint.getGraph()),this.executor.run(this.byStep),this.running=!0},reset(){this.executor.reset(),this.$refs.blueprint.fromJSON(d)},empty(){this.executor.reset(),this.$refs.blueprint.fromJSON({cells:[]})}}},c=i(7),l=Object(c.a)(a,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"demonstration tool-bar"},[e("el-button",{on:{click:t.execute}},[t._v("执行")]),t._v(" "),e("div",[t._v("\n      单步：\n      "),e("el-switch",{model:{value:t.byStep,callback:function(e){t.byStep=e},expression:"byStep"}})],1),t._v(" "),e("div",[t._v("\n      并发：\n      "),e("el-input-number",{staticStyle:{width:"140px"},attrs:{min:1,max:100},model:{value:t.limit,callback:function(e){t.limit=e},expression:"limit"}})],1),t._v(" "),e("el-button",{on:{click:t.reset}},[t._v("重置")]),t._v(" "),e("el-button",{on:{click:t.empty}},[t._v("清空")])],1),t._v(" "),e("BlueprintEditor",{ref:"blueprint"})],1)}),[],!1,null,null,null);e.default=l.exports}}]);